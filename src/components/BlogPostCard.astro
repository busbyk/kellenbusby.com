---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  tags: string[];
  href: string;
  heroImage?: ImageMetadata;
  heroImageAlt?: string;
}

const { title, description, pubDate, tags, href, heroImage, heroImageAlt } =
  Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});
---

<a href={href} class="group block">
  <article
    class="flex flex-col md:flex-row gap-4 p-4 -mx-4 rounded-lg hover:bg-card transition-colors"
  >
    {heroImage && (
      <div
        class="md:w-48 md:h-32 flex-shrink-0 overflow-hidden rounded-md bg-card"
      >
        <Image
          src={heroImage}
          alt={heroImageAlt || ''}
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          width={192}
          height={128}
        />
      </div>
    )}

    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1">
        <time datetime={pubDate.toISOString()} class="text-sm text-muted">
          {formattedDate}
        </time>
      </div>

      <h2
        class="text-xl font-bold mb-2 group-hover:text-primary transition-colors"
      >
        {title}
      </h2>

      <p class="text-muted line-clamp-2 mb-2">{description}</p>

      {tags.length > 0 && (
        <div class="flex flex-wrap gap-1">
          {tags.map((tag) => (
            <span class="px-2 py-0.5 bg-border rounded text-xs">{tag}</span>
          ))}
        </div>
      )}
    </div>
  </article>
</a>
